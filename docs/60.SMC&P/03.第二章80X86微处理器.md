---
title: 第二章 80X86微处理器
date: 2021-05-16 15:30:00
permalink: /SMC&P/note/2
author: 
    name: eric
    href: https://wfmiss.cn
---
# 第二章 80X86微处理器
```txt
二、80X86微处理器
（一）知识范围
8086/8088CPU的内部结构和外部引线； 
8086/8088CPU的工作方式；
8086/8088CPU系统总线的形成；
8086/8088的存储器结构；
总线操作及时序。
（二）考核要求
1.	掌握8086/8088CPU的功能构成及流水线技术，理解流水线管理规则。
2.	掌握 8086/8088CPU寄存器的组成及其应用。
3.	理解8086/8088CPU的内存分配，掌握实地址模式下的存储器地址变换方法。
4.	掌握8086/8088CPU的引脚构成，理解其引脚复用的特性。
```
## 1. 16位微处理器概述

8086和8088 CPU的内部基本相同，但它们的外部性能是有区别的。

8086 是16位数据总线，而8088是8位数据总线，在处理一个16位数据字时，8088需要两步操作而8086只需要一步。

8086和8088 CPU的内部都采用16位字进行操作及存储器寻址，两者的软件完全兼容，程序的执行也完全相同。

然而，由于8088要比8086有较多的**外部存取操作**。所以，对相同的程序，它将执行得较慢。这两种微处理器都封装在相同的40脚双列直插组件(DIP)中。

## 2. 8086/8088微型处理器（CPU）

8086 CPU从功能上可分两部分，即**总线接口部件（BIU）和指令执行部件（EU）**。8086的内部结构如图。

![](https://cdn.jsdelivr.net/gh/wfmiss/pictures/Principle_and_application_of_microcomputer/20210526181730.png)

指令执行部件（EU）主要由算数运逻辑运算单元（ALU）、标志寄存器（FR）、通用寄存器组和EU控制电路4个部件组成，其主要功能就是负责指令执行。将指令译码并利用内部的寄存器和ALU对数据进行所需处理。

总线接口部件（BIU）主要由地址加法器、专用寄存器组、指令队列和总线控制电路4个部件组成，其主要功能是形成访问存储器的物理地址、访问存储器并存取指令暂存到指令队列中等待执行，访问存储器或I/O端口读取操作数来参加EU运算或存放运算结果等。

###  2.1指令执行部件（EU）

**指令执行部件由下列部分组成：**

- 寄存器：
  - 4个16位通用寄存器，这些寄存器除了具有保存数据和地址作用外，各寄存器还有其特殊用途。
    - AX（累加器）：一般用来存放参加运算的数据和结果，在乘，除法运算、I/O操作、BCD数运算中有不可替代的作用。
    - BX（基址寄存器）：除可作为数据寄存器外，还可存放内存的逻辑偏移地址，而AX，CX，DX不能。
    - CX（数据寄存器）：既可以作为数据寄存器，又可串指令和位移指令中作为计数用。
    - DX（数据寄存器）：除可作为通用数据寄存器外，还在乘、除法运算、带符号数的扩张指令中有特殊用途。
    - 通用寄存器既可以用来存放16位的数据或地址，也可把它们作为8位寄存器来使用，即把每个16位的通用寄存器分成高8位和低8位。低8位被命名为AL、BL、CL和DL、，高八位被命名为AH、BH、CH和DH。这些寄存器一般存放8位数据。
  - 4个16位专用寄存器，主要用来存放存储器或I/O端口的地址。
    - SI（源变址寄存器）：多用于存放内存的逻辑偏移地址（隐含的逻辑段地址在数据段寄存器中），也可以存放数据。
    - DI（目标变址寄存器）：多用于存放内存的逻辑偏移地址（隐含的逻辑段地址在数据段寄存器中），也可以存放数据。
    - BP（基址指针寄存器）：多用于存放内存的逻辑偏移地址（隐含的逻辑段地址在堆栈段寄存器中），也可以存放数据。
    - SP（堆栈指针寄存器）：多用于存放内存的逻辑偏移地址（隐含的逻辑段地址在堆栈段寄存器中），也可以存放数据。
- 标志寄存器（FR）
- 算数逻辑部件（ALU）
- 内部控制逻辑

*******************

**8086/8088 的EU有以下特点：**

**8个16位通用寄存器：**

- 数据寄存器（AX、BX、CX、DX）
  - 可用来存放16位的数据地址，又可分为8个8位寄存器(只能存放数据而不能存放地址)，即：

```txt
寄存器特有的习惯用法：
AX ——> AH,AL	AX:所有I/O指令都通过AX或AL与接口传输信息，中间运算结果也多放于AX中。
BX ——> BH,BL 	BX:在间接寻址中用于存放基地址。
CX ——> CH,CL 	CX:可以用作数据寄存器，在字符串操作、循环操作和位移操作时用作计数器，存放计数值。
DX ——> DH,DL 	DX:在间接寻址的I/O指令中存放I/O端地址；在32位乘除法运算时，存放高16位数。
```

****

**指针和变址寄存器（SP、BP、SI、DI）：**

4个16位寄存器，主要用来存放操作数的偏移地址（即操作数的段内地址）。

- SP（堆栈指针寄存器）：在堆栈操作中存放栈顶的偏移地址。（不能寻址，路标）
- BP（基址指针寄存器）：常用于在访问内存时存放内存单元的偏移地址，还用作堆栈区的基地址寄存器。（可以寻址）

```txt
注意BX与BP在应用上的区别：

  - 作为通用寄存器（16位寄存器），二者均可用于存放数据
  - 作为基址寄存器，用BX表示所寻找的数据在数据段；用BP则表示数据在堆栈段
```

- SI（源变址寄存器）：主要用于存放地址，在字符串操作中存放源操作数的偏移地址。

- DI（目的变址寄存器）：主要用于存放地址，在字符串操作中存放目的操作数的偏移地址。

```txt
变址寄存器常用于指令的间接寻址或变址寻址。
在串操作中变址寄存器内存放的地址在数据传送完成后，具有自动修改的功能。
例如:传送1字节数据之后地址自动加1，为下次传送做好准备，变址寄存器因此得名。
```

*****

**算数逻辑单元（ALU）及标志寄存器（FR）**

- 算数逻辑运算单元ALU：
  - 可完成16位或8位的算数逻辑运算，运算结果通过内部总线送到通用寄存器，或者送往BIU的内部寄存器中，等待写入存储器。ALU运算后的结果特征（有无进位，溢出等）置入标志寄存器FLAGS中保存。
- 标志寄存器FLAGS：（FLAGS=FR=PSW）
  - 16位寄存器，用来存放运算结果的特征和控制标志。

<img src="https://cdn.jsdelivr.net/gh/wfmiss/pictures/Principle_and_application_of_microcomputer/20210526231231.png" style="zoom:150%;" />

根据功能，8086的标志可以分为两类：

- 状态标志：6个，用来表示运算结果的特征。包括CF、PF、AF、ZF、SF和OF
- 控制标志：3个，用来控制CPU的操作。包括IF、DF和TF。

![](https://cdn.jsdelivr.net/gh/wfmiss/pictures/Principle_and_application_of_microcomputer/20210528001205.jpg)

![表4-1 8086/8088 标志位表](https://cdn.jsdelivr.net/gh/wfmiss/pictures/Principle_and_application_of_microcomputer/20210526232227.png)

### 2.2总线接口部件（BIU）

**总线接口部件由下列各部分组成：**

- 4个段地址寄存器，即:

```txt
CS —— 16位代码段寄存器;
DS —— 16位数据段寄存器;
ES —— 16位附加段寄存器;
SS —— 16位堆栈段寄存器。
```

- 16位指令指针寄存器 IP。

- 20位地址加法器。

- 6字节的队列指令。

**8086/8088的 BIU有如下特点：**

* 8086 的指令队列为6个字节，8088的指令队列为4个字节。不管是8086还是8088，都会在执行指令的同时，从内存中取下一条指令或下几条指令，取来的指令就放在指令列中。这样，一般情况下，CPU执行完一条指令就可以立即执行下一条指令，而不需要像以往的计算机那样，让CPU轮番进行取指令和执行指令的操作，从而提高了CPU的效率。

* 地址加法器用来产生20位地址。上面已经提到，8086可用20位地址寻址1M字节的内存空间，但8086 内部所有的寄存器都是16位的，所以需要由一个附加的机构来根据16位寄存器提供的信息计算出0位的物理地址，这个机构就是20位的地址加法器。

```txt
例如，一条指令的物理地址就是根据代码段寄存器CS和指令指针寄存器IP的内容得到的。具体计算时，要将段寄存器的内容左移4位，然后再与IP的内容相加。假设CS=OFEO0H, IP=0400H，此时指令的物理地址为0FE400H。
```

**总线接口部件和执行部件并不是同步工作的，它们是按以下流水线技术原则管理：**

* 每当8086 的指令队列中有两个空字节，或者8088的指令队列中有一个空字节时，总线接口部件就会自动把指令取到指令队列中。

* 每当执行部件准备执行一条指令时，它会从总线接口部件的指令队列前部取出指令的代码，然后用几个时钟周期去执行指令。在执行指令的过程中，如果必须访问存储器或者输入/输出设备，那么，执行部件就会请求总线接口部件，进人总线周期，完成访问内存或者输人/输出端口的操作；如果此时总线接口部件正好处于空闲状态，那么，会立即响应执行部件的总线请求。但有时会遇到这样的情况，执行部件请求总线接口部件访问总线时，总线接口部件正在将某个指令字节取到指令队列中，此时总线接口部件将首先完成这个取指令的总线周期，然后再去响应执行部件发出的访问总线的请求。

* 当指令队列已满，而且执行部件又没有总线访问时，总线接口部件便进人空闲状态。

* 在执行转移指令、调用指令和返回指令时，下面要执行的指令就不是在程序中紧接着的那条指令了，而总线接口部件往指令队列装入指令时，总是按顺序进行的，这样，指令队列中已经装入的字节就没有用了。遇到这种情况，指令队列中的原有内容被自动消除，总线接口部件会接着往指令队列中装人另一个程序段中的指令。

